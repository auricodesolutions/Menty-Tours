/* ===== Explore Memories (masonry + filters) ===== */
.mx{
  --ink: var(--tm-ink,#0d233c);
  --ink-dim: var(--tm-ink-dim,#596a80);
  --brand: var(--tm-brand,#2563eb);
  --chip-bg: var(--tm-chip-bg,#f1f6ff);
  --chip-border: var(--tm-chip-border,rgba(37,99,235,.18));
  --gold-1: var(--tm-gold-1,#f6d36a);
  --gold-2: var(--tm-gold-2,#e8b84c);
  --radius: 18px; --gap: 14px; --ease:cubic-bezier(.22,1,.36,1);

  color: var(--ink);
  background:
    radial-gradient(1200px 700px at 8% -10%, #eaf2ff 0%, transparent 70%),
    radial-gradient(1200px 700px at 108% 0%, #eefdfc 0%, transparent 72%),
    #f6f9ff;
  scroll-behavior: smooth;
}

/* reveal */
.mx-reveal{ opacity:0; transform:translateY(14px) scale(.985); }
.mx-reveal.show{ opacity:1; transform:none; transition:opacity .5s var(--ease), transform .6s var(--ease); }
@media (prefers-reduced-motion:reduce){ .mx-reveal,.mx-reveal.show{ opacity:1; transform:none; transition:none; } }

/* hero */
.mx-hero{ max-width:1100px; margin:0 auto; padding: clamp(26px,5vw,50px) 16px 8px; text-align:center; }
.mx-badge{ display:inline-block; padding:6px 12px; border-radius:999px; font-size:12px; background:#fff; border:1px solid rgba(13,35,60,.08); box-shadow:0 12px 30px rgba(13,35,60,.08); }
.mx h1{ font-size: clamp(28px,4.6vw,44px); letter-spacing:-.02em; margin:8px 0 6px; }
.mx-sub{ color: var(--ink-dim); margin: 0 0 12px; }

/* controls */
.mx-controls{ display:grid; gap:10px; justify-items:center; }
.mx-input{
  width:min(720px,100%); border:1px solid rgba(13,35,60,.10); border-radius:14px; padding:12px 14px; background:#fff;
  box-shadow: inset 0 0 0 1px transparent, 0 10px 26px rgba(13,35,60,.05); outline:none;
}
.mx-input:focus{ box-shadow: inset 0 0 0 1px rgba(37,99,235,.28), 0 12px 30px rgba(13,35,60,.08); }
.mx-tags{ display:flex; gap:8px; flex-wrap:wrap; justify-content:center; }
.mx-chip{
  font-weight:700; font-size:13px; padding:8px 12px; border-radius:999px;
  background:var(--chip-bg); color:#163a7a; border:1px solid var(--chip-border);
  transition:transform .18s var(--ease), box-shadow .18s var(--ease), background .18s var(--ease);
}
.mx-chip:hover{ transform:translateY(-1px); box-shadow:0 12px 28px rgba(13,35,60,.10); }
.mx-chip.active{ background:#fff; box-shadow:0 14px 34px rgba(13,35,60,.10); }

/* masonry (CSS columns) */
.mx-masonry{
  max-width:1100px; margin:6px auto 90px; padding: 0 16px;
  column-gap: var(--gap);
  column-count: 1;
}
@media (min-width:620px){ .mx-masonry{ column-count: 2; } }
@media (min-width:980px){ .mx-masonry{ column-count: 3; } }

.mx-item{
  break-inside: avoid; margin: 0 0 var(--gap); position: relative; overflow:hidden;
  background:#fff; border:1px solid rgba(13,35,60,.06); border-radius: var(--radius);
  box-shadow: 0 14px 40px rgba(13,35,60,.10), inset 0 2px 0 rgba(255,255,255,.7);
  display:block; cursor: zoom-in;
  transform: translateZ(0);
  transition: transform .25s var(--ease), box-shadow .25s var(--ease);
}
.mx-item:hover{ transform:translateY(-2px); box-shadow:0 20px 52px rgba(13,35,60,.14); }
.mx-item img{ width:100%; height:auto; display:block; }
.mx-item figcaption{
  position:absolute; left:10px; right:10px; bottom:10px;
  display:flex; gap:8px; align-items:center; justify-content:space-between;
  background: linear-gradient(180deg, rgba(255,255,255,.86), rgba(255,255,255,.68));
  padding:8px 10px; border-radius:14px; border:1px solid rgba(13,35,60,.08);
  font-weight:700; color:#1f2937; opacity:0; transform:translateY(10px); transition:opacity .25s var(--ease), transform .25s var(--ease);
}
.mx-item:hover figcaption{ opacity:1; transform:none; }
.mx-item figcaption span{ font-size:12px; color:var(--ink-dim); font-weight:600; }

.mx-empty{ text-align:center; color:var(--ink-dim); }

/* lightbox */
.mx-lightbox{ position:fixed; inset:0; z-index:60; background:rgba(13,35,60,.76); display:grid; place-items:center; padding:18px; animation:fade .2s var(--ease); }
.mx-lightbox-inner{ position:relative; max-width:min(1200px,94vw); max-height:88vh; background:#000; border-radius:16px; overflow:hidden; box-shadow:0 40px 100px rgba(0,0,0,.4); }
.mx-lightbox img{ display:block; max-height:88vh; width:100%; object-fit:contain; }
.mx-lightbox figcaption{ position:absolute; left:0; right:0; bottom:0; padding:12px 14px; display:flex; gap:10px; align-items:center; background:linear-gradient(180deg, rgba(0,0,0,0), rgba(0,0,0,.55)); color:#fff; font-weight:700; }
.mx-lightbox figcaption span{ font-size:12px; opacity:.9; font-weight:600; }
.mx-x{ position:absolute; top:10px; right:10px; width:38px; height:38px; border-radius:999px; background:#fff; color:#111827; border:1px solid rgba(13,35,60,.15); box-shadow:0 12px 30px rgba(13,35,60,.24); font-size:24px; line-height:1; cursor:pointer; }
.mx-arrow{ position:absolute; top:50%; transform:translateY(-50%); width:42px; height:42px; border-radius:50%; background:#fff; border:1px solid rgba(13,35,60,.18); box-shadow:0 12px 30px rgba(13,35,60,.24); cursor:pointer; }
.mx-arrow.left{ left:10px; } .mx-arrow.right{ right:10px; }
.mx-arrow::before{ content:""; width:12px; height:12px; border-top:2px solid #111827; border-right:2px solid #111827; display:block; margin:auto; transform:rotate(135deg); }
.mx-arrow.right::before{ transform:rotate(-45deg); }

@keyframes fade{ from{opacity:0} to{opacity:1} }

/* back to top */
.mx-fab{
  position: fixed; right: 16px; bottom: 16px; z-index: 30;
  width: 44px; height: 44px; display: grid; place-items: center;
  border-radius: 999px; text-decoration: none; color: #1f2937;
  background: linear-gradient(180deg, var(--gold-1), var(--gold-2));
  box-shadow: 0 18px 40px rgba(225,180,70,.35);
  border: 0;
}
.mx-fab:focus-visible{ outline: none; box-shadow: 0 0 0 3px var(--chip-bg), 0 0 0 6px rgba(37,99,235,.28); }
